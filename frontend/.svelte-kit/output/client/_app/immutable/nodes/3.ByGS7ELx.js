import{n as nt,a as B,t as K,c as lt}from"../chunks/BPQ8Vvbp.js";import{aa as i,ab as s,a7 as T,a5 as Q,a4 as q,a8 as R,d as t,am as k,N as c,a9 as _}from"../chunks/BX49FQ4v.js";import{s as S}from"../chunks/DIkiOp1w.js";import{i as D}from"../chunks/BYfJyGK5.js";import{s as j}from"../chunks/ehbMLAtO.js";import{s as rt,a as ct,t as G,q as vt,f as W,b as ht}from"../chunks/PKv2Hnb5.js";import{d as dt}from"../chunks/PglI5o85.js";import{p as I}from"../chunks/CNuWdYxJ.js";import{o as ut}from"../chunks/CMPQAxMG.js";import{u as x}from"../chunks/SH07ChxB.js";var ft=nt('<svg stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewBox="-3 0 32 32"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');function mt(d,a){var e=ft(),o=i(e);s(e),T(()=>{j(e,"stroke",a.filled?"#000":"#fff"),j(e,"fill-opacity",a.filled?"1":"0"),rt(o,`heart ${(a.filled?"isFilled":"")??""}  svelte-j68tdx`)}),B(d,e)}var gt=(d,a,e,o,h)=>{a("prev"),e(t(o),t(h))},_t=(d,a,e,o,h)=>{t(a)?e(t(o),t(h),"down"):e(t(o),t(h),"up")},pt=K('<div class="block svelte-12azqnq"><img alt="mainPhoto" class="svelte-12azqnq"> <div class="picFooter svelte-12azqnq"><div><button class="likeButton svelte-12azqnq"><!></button> <h3><!></h3></div> <div class="photoDesc svelte-12azqnq"><div><h3> </h3> <h4> </h4></div></div></div></div>'),qt=(d,a,e,o,h)=>{a("next"),e(t(o),t(h))},kt=K('<div class="mainContentBox svelte-12azqnq"><div class="picExtra svelte-12azqnq"><button class="nextPhotoButton">Prev</button></div> <div class="pictureWrap svelte-12azqnq"><!></div> <div class="picExtra svelte-12azqnq"><button class="nextPhotoButton">Next</button></div></div>');function xt(d,a){Q(a,!0);let e=k(0),o=k(!1);console.log("This is in photoPreview",a.chosenBatch);let h=["photo1","photo2","photo3","photo4","photo5"],U=q(()=>a.chosenBatch[t(e)].path.replace("../static","")),f=q(()=>a.chosenBatch[t(e)].ordinalNum),m=q(()=>a.chosenBatch[t(e)].imgLocation),b=k(!1),p=k(0),O=q(()=>t(p)>0);function w(){console.log("this is localstroage pull",localStorage.getItem(`${t(m)}${t(f)}`)),c(b,I(localStorage.getItem(`${t(m)}${t(f)}`)=="true"))}function E(n){n=="next"?(t(e)<h.length-1?c(e,t(e)+1):c(e,0),c(o,!0),setTimeout(()=>{c(o,!1)},x.animationBaseLength*.8)):n=="prev"?(t(e)>0?c(e,t(e)-1):c(e,h.length-1),c(o,!0),setTimeout(()=>{c(o,!1)},x.animationBaseLength*.8)):alert("Not a valid switchPhoto() input"),w()}async function X(n,l,v="up"){const u=await fetch(`http://127.0.0.1:8000/images/${v}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({imgLocation:n,ordinalNum:l})});if(u.ok){const r=await u.json();let g=JSON.stringify(r);c(p,I(r==null?void 0:r.rating)),console.log(g),v==="up"?localStorage.setItem(`${n}${l}`,"true"):v==="down"&&localStorage.removeItem(`${n}${l}`),w()}else throw new Error(" Could not access photo on server ")}async function P(n,l){const v=await fetch(`http://127.0.0.1:8000/images/${n}/${l}`,{method:"GET"});if(!v.ok)throw console.log(v),new Error("Could not get requested picture");const u=await v.json();let r=JSON.stringify(u);console.log(r),c(p,I(u.rating))}ut(()=>{P(a.chosenBatch[0].imgLocation,a.chosenBatch[0].ordinalNum),w()});var y=kt(),z=i(y),Y=i(z);Y.__click=[gt,E,P,m,f],s(z);var L=_(z,2),Z=i(L);{var $=n=>{var l=pt(),v=i(l),u=_(v,2),r=i(u),g=i(r);g.__click=[_t,b,X,m,f];var et=i(g);mt(et,{get filled(){return t(b)}}),s(g);var F=_(g,2),at=i(F);{var ot=C=>{var A=lt();T(()=>S(A,t(p))),B(C,A)};D(at,C=>{t(O)&&C(ot)})}s(F),s(r);var H=_(r,2),M=i(H),N=i(M),it=i(N,!0);s(N);var V=_(N,2),st=i(V,!0);s(V),s(M),s(H),s(u),s(l),T(()=>{j(v,"src",t(U)),ct(r,`likeBox ${(t(O)?"countVisible":"")??""}  svelte-12azqnq`),S(it,t(f)),S(st,t(m))}),G(2,l,()=>W,()=>({y:200,duration:x.animationBaseLength*.8,easing:vt})),G(1,l,()=>W,()=>({y:200,duration:x.animationBaseLength*.8,easing:ht})),B(n,l)};D(Z,n=>{t(o)||n($)})}s(L);var J=_(L,2),tt=i(J);tt.__click=[qt,E,P,m,f],s(J),s(y),B(d,y),R()}dt(["click"]);function It(d,a){Q(a,!0),console.log("this is page.svelte data: ",a.data),xt(d,{get chosenBatch(){return a.data.images}}),R()}export{It as component};
